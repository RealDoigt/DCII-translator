<meta charset="utf-8"/>
<title>UTF-8 to DCII</title>

<style> 

  select, textarea, button { display: block; }
  .other { display: none; }
</style>

<span>source text:</span>
<textarea></textarea>
<br/>

<span>braces:</span>

<select name="braces" id="braces">

    <option value="none">none</option>
    <option value="{}">{}</option>
    <option value="[]">[]</option>
    <option value="()">()</option>
    <option value="<>">&lt;&gt;</option>
    <option value="other">other</option>
</select>

<input class="other" type="text" id="other-begin" placeholder="begin"/>
<input class="other" type="text" id="other-end" placeholder="end"/>
<br/>

<span>base:</span>

<select name="base" id="base">

    <option value="decimal">decimal</option>
    <option value="hexadecimal">hexadecimal</option>
    <option value="binary">binary</option>
    <option value="octal">octal</option>
</select>

<input type="text" id="prefix" placeholder="prefix"/>
<input type="text" id="suffix" placeholder="suffix"/>
<br/>
<br/>

<span>delimiter:</span>
<input type="text" id="delimiter" placeholder="delimiter" value=", "/>
<button>to DNCII</button>
<br/>

<p></p>

<script>

  const charTable = {
    
    "\n": 1,
    " ": 3,
    "!": 4,
    "#": 5,
    "'": 7,
    "(": 8,
    "[": 8000,
    ")": 9,
    "]": 9000,
    "*": 10,
    "+": 11,
    ",": 12,
    "-": 13,
    ".": 14,
    "/": 15,
    ":": 16,
    ";": 17,
    "?": 18,
    "0": 19,
    "1": 20,
    "2": 21,
    "3": 22,
    "4": 23,
    "5": 24,
    "6": 25,
    "7": 26,
    "8": 27,
    "9": 28,
    "a": 29,
    "A": 29000,
    "b": 30,
    "B": 30000,
    "c": 31,
    "C": 31000,
    "d": 32,
    "D": 32000,
    "e": 33,
    "E": 33000,
    "f": 34,
    "F": 34000,
    "g": 35,
    "G": 35000,
    "h": 36,
    "H": 36000,
    "i": 37,
    "I": 37000,
    "j": 38,
    "J": 38000,
    "k": 39,
    "K": 39000,
    "l": 40,
    "L": 40000,
    "m": 41,
    "M": 41000,
    "n": 42,
    "N": 42000,
    "o": 43,
    "O": 43000,
    "p": 44,
    "P": 44000,
    "q": 45,
    "Q": 45000,
    "r": 46,
    "R": 46000,
    "s": 47,
    "S": 47000,
    "t": 48,
    "T": 48000,
    "u": 49,
    "U": 49000,
    "v": 50,
    "V": 50000,
    "w": 51,
    "W": 51000,
    "x": 52,
    "X": 52000,
    "y": 53,
    "Y": 53000,
    "z": 54,
    "Z": 54000,
    "ア": 55,
    "あ": 55000,
    "イ": 56,
    "い": 56000,
    "ウ": 57,
    "う": 57000,
    "エ": 58,
    "え": 58000,
    "オ": 59,
    "お": 59000,
    "カ": 60,
    "か": 60000,
    "キ": 61,
    "き": 61000,
    "ク": 62,
    "く": 62000,
    "ケ": 63,
    "け": 63000,
    "コ": 64,
    "こ": 64000,
    "サ": 65,
    "さ": 65000,
    "シ": 66,
    "し": 66000,
    "ス": 67,
    "す": 67000,
    "セ": 68,
    "せ": 68000,
    "ソ": 69,
    "そ": 69000,
    "タ": 70,
    "た": 70000,
    "チ": 71,
    "ち": 71000,
    "ツ": 72,
    "つ": 72000,
    "テ": 73,
    "て": 73000,
    "ト": 74,
    "と": 74000,
    "ナ": 75,
    "な": 75000,
    "ニ": 76,
    "に": 76000,
    "ヌ": 77,
    "ぬ": 77000,
    "ネ": 78,
    "ね": 78000,
    "ノ": 79,
    "の": 79000,
    "ハ": 80,
    "は": 80000,
    "ヒ": 81,
    "ひ": 81000,
    "フ": 82,
    "ふ": 82000,
    "ヘ": 83,
    "ホ": 84,
    "ほ": 84000,
    "マ": 85,
    "ま": 85000,
    "ミ": 86,
    "み": 86000,
    "ム": 87,
    "む": 87000,
    "メ": 88,
    "め": 88000,
    "モ": 89,
    "も": 89000,
    "ヤ": 90,
    "や": 90000,
    "ユ": 91,
    "ゆ": 91000,
    "ヨ": 92,
    "よ": 92000,
    "ラ": 93,
    "ら": 93000,
    "リ": 94,
    "り": 94000,
    "ル": 95,
    "る": 95000,
    "レ": 96,
    "れ": 96000,
    "ロ": 97,
    "ろ": 97000,
    "ワ": 98,
    "わ": 98000,
    "ヰ": 99,
    "ヱ": 100,
    "ヲ": 101,
    "を": 101000,
    "ン": 102,
    "ん": 102000,
    "б": 103,
    "Б": 103000,
    "в": 104,
    "В": 104000,
    "д": 105,
    "Д": 105000,
    "ж": 106,
    "Ж": 106000,
    "з": 107,
    "З": 107000,
    "и": 108,
    "И": 108000,
    "л": 109,
    "Л": 109000,
    "м": 110,
    "М": 110000,
    "н": 111,
    "Н": 111000,
    "п": 112,
    "П": 112000,
    "у": 113,
    "У": 113000,
    "ф": 114,
    "Ф": 114000,
    "ц": 115,
    "Ц": 115000,
    "ч": 116,
    "Ч": 116000,
    "ш": 117,
    "Ш": 117000,
    "щ": 118,
    "Щ": 118000,
    "ъ": 119,
    "Ъ": 119000,
    "ы": 120,
    "Ы": 120000,
    "ь": 121,
    "Ь": 121000,
    "э": 122,
    "Э": 122000,
    "ю": 123,
    "Ю": 123000,
    "я": 124,
    "Я": 124000,
    "β": 125,
    "Β": 125000,
    "γ": 126,
    "Γ": 126000,
    "δ": 127,
    "Δ": 127000,
    "ζ": 128,
    "Ζ": 128000,
    "η": 129,
    "Η": 129000,
    "θ": 130,
    "Θ": 130000,
    "ι": 131,
    "Ι": 131000,
    "λ": 132,
    "Λ": 132000,
    "μ": 133,
    "Μ": 133000,
    "ν": 134,
    "Ν": 134000,
    "ξ": 135,
    "Ξ": 135000,
    "π": 136,
    "Π": 136000,
    "σ": 137,
    "Σ": 137000,
    "τ": 138,
    "Τ": 138000,
    "υ": 139,
    "Υ": 139000,
    "φ": 140,
    "Φ": 140000,
    "χ": 141,
    "Χ": 141000,
    "ψ": 142,
    "Ψ": 142000,
    "ω": 143,
    "Ω": 143000,
    "ა": 144,
    "ბ": 145,
    "გ": 146,
    "დ": 147,
    "ე": 148,
    "ვ": 149,
    "ზ": 150,
    "თ": 151,
    "ი": 152,
    "ლ": 153,
    "მ": 154,
    "ნ": 155,
    "ო": 156,
    "პ": 157,
    "ჟ": 158,
    "რ": 159,
    "ს": 160,
    "ტ": 161,
    "უ": 162,
    "ფ": 163,
    "ქ": 164,
    "ღ": 165,
    "ყ": 166,
    "შ": 167,
    "ჩ": 168,
    "ც": 169,
    "ძ": 170,
    "წ": 171,
    "ჭ": 172,
    "ხ": 173,
    "ჯ": 174,
    "ჰ": 175,
    "ա": 176,
    "Ա": 176000,
    "բ": 177,
    "Բ": 177000,
    "գ": 178,
    "Գ": 178000,
    "դ": 179,
    "Դ": 179000,
    "ե": 180,
    "Ե": 180000,
    "զ": 181,
    "Զ": 181000,
    "է": 182,
    "Է": 182000,
    "Ը": 183,
    "ը": 183000,
    "թ": 184,
    "Թ": 184000,
    "ժ": 185,
    "Ժ": 185000,
    "ի": 186,
    "Ի": 186000,
    "լ": 187,
    "Լ": 187000,
    "խ": 188,
    "Խ": 188000,
    "ծ": 189,
    "Ծ": 189000,
    "կ": 190,
    "Կ": 190000,
    "հ": 191,
    "Հ": 191000,
    "ձ": 192,
    "Ձ": 192000,
    "ղ": 193,
    "Ղ": 193000,
    "ճ": 194,
    "Ճ": 194000,
    "մ": 195,
    "Մ": 195000,
    "յ": 196,
    "Յ": 196000,
    "ն": 197,
    "Ն": 197000,
    "շ": 198,
    "Շ": 198000,
    "ո": 199,
    "Ո": 199000,
    "չ": 200,
    "Չ": 200000,
    "պ": 201,
    "Պ": 201000,
    "ջ": 202,
    "Ջ": 202000,
    "ռ": 203,
    "Ռ": 203000,
    "ս": 204,
    "Ս": 204000,
    "վ": 205,
    "Վ": 205000,
    "տ": 206,
    "Տ": 206000,
    "ր": 207,
    "Ր": 207000,
    "ց": 208,
    "Ց": 208000,
    "ւ": 209,
    "Ւ": 209000,
    "փ": 210,
    "Փ": 210000,
    "ք": 211,
    "Ք": 211000,
    "ֆ": 212,
    "Ֆ": 212000,
    "և": 213
  };
  
  window.onload = () => {
    
    const customBeginBrace = document.getElementById("other-begin");
    const customEndBrace = document.getElementById("other-end");
    const selectBraces = document.getElementById("braces");
    const selectBase = document.getElementById("base");
    
    selectBraces.onchange = () => {
      
      if (selectBraces.value === "other") {
        
        customBeginBrace.style.display = "inline";
        customEndBrace.style.display = "inline";
      }
      
      else {
        
        customBeginBrace.style.display = "none";
        customEndBrace.style.display = "none";
      }
    };
    
    selectBase.onchange = () => {
      
      const prefix = document.getElementById("prefix");
      
      switch (selectBase.value) {
        
        case "hexadecimal":
          
          prefix.value = "0x";
          break;
        
        case "binary":
        
          prefix.value = "0b";
          break;
          
        case "octal":
        
          prefix.value = "0";
          break;
          
        default:
        
          prefix.value = "";
          break;
      }
    };
    
    document.querySelector("button").onclick = () => {
    
      const p = document.querySelector("p");
      const txt = Array.from(document.querySelector("textarea").value);
      
      const prefix = document.getElementById("prefix").value;
      const suffix = document.getElementById("suffix").value;
      
      const delimiter = document.getElementById("delimiter").value;
      
      if (selectBraces.value !== "none")
        p.innerText = selectBraces.value === "other" ? customBeginBrace.value : selectBraces.value[0];
      
      txt.forEach(char => {
        
        let num = 255;
        let numb = "";
        
        if (char in charTable) num = charTable[char];
        
        if (num >= 1000) {
          
          num /= 1000;
          numb = 2;
        }
        
        // note: toString(<n>) doesn't care if the param is an empty string, which is why this works
        switch (selectBase.value){
          
          case "hexadecimal":
          
            num = num.toString(16);
            numb = numb.toString(16);
            break;
            
          case "binary":
          
            num = num.toString(2);
            numb = numb.toString(2);
            break;
            
          case "octal":
          
            num = num.toString(8);
            numb = numb.toString(8);
            break;
        }
        
        if (numb !== "")
          p.innerText += `${prefix}${numb}${suffix}${delimiter}`;
          
        p.innerText += `${prefix}${num}${suffix}${delimiter}`;
      });
      
      if (selectBraces.value !== "none")
        p.innerText += selectBraces.value === "other" ? customEndBrace.value : selectBraces.value[1];
    };
  };
</script>